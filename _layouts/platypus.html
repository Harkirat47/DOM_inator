<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Binary Number Guesser</title>
  <style>
    body {
      font-family: Impact, serif;
      text-align: center;
      background-repeat: no-repeat;
      background-image: url('https://fiu-original.b-cdn.net/fontsinuse.com/use-images/122/122013/122013.png?filename=Captura%20de%20VLC_2020-09-26-20h46m09s582.png');
      /* Replace with your background image URL */
      background-size: cover;
      background-position: center;
    }
    .character {
      position: relative;
      width: 150px;
      height: 150px;
      margin: 20px;
      transition: transform 0.7s ease;
      display: inline-block;
      background-size: cover;
    }
    #doofenshmirtz {
      background-image: url('https://upload.wikimedia.org/wikipedia/en/e/eb/Heinz_Doofenshmirtz.png');
      /* Replace with Dr. Doofenshmirtz image URL */
      animation: kickAnimation 1s ease-in-out forwards;
    }
    @keyframes kickAnimation {
      0% {
        transform: translateY(0);
      }
      25% {
        transform: translateY(-20px) rotate(10deg);
      }
      50% {
        transform: translateY(0) rotate(-10deg);
      }
      75% {
        transform: translateY(-10px) rotate(5deg);
      }
      100% {
        transform: translateY(0);
      }
    }
    .speech-bubble {
      position: absolute;
      bottom: 100%;
      left: -180%;
      /* Adjusted to move speech bubble to the left */
      padding: 8px 12px;
      background-color: rgb(8, 199, 72);
      border: 1px solid #ff0000;
      border-radius: 10px;
      font-size: 18px;
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    .game-box {
      width: 60%;
      margin: 20px auto;
      border: 3px solid #379848;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 242, 255, 0.2);
    }
    #doofenshmirtz.speaking .speech-bubble {
      bottom: 100%;
      opacity: 1;
      left: -80%;
      /* Adjusted to show the speech bubble to the left */
    }
    #perry {
      background-image: url('https://static.wikia.nocookie.net/vsbattles/images/6/64/Perry_the_platypus_by_sarrel-d3gvo02.png/revision/latest/scale-to-width-down/1200?cb=20160528190454');
      /* Replace with Perry the Platypus image URL */
    }
    /* Styles for hints */
    .hint {
      font-style: italic;
      color: #ff0000;
      margin-top: 20px;
      font-size: 18px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 20px;
      cursor: pointer;
    }
    canvas#particleCanvas {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
    }
  </style>
</head>
<body>
  <div class="game-box">
    <h1>Binary Number Guesser</h1>
    <p>Try to guess the binary number (between 0 and 256):</p>
    <input type="text" id="userGuess" placeholder="Enter binary number">
    <button onclick="checkGuess()">Check</button>
    <button onclick="resetGame()">Reset</button>
    <p id="result"></p>
    <p>Attempts Left: <span id="attemptsLeft">30</span></p>
    <p class="hint" id="hintText">Hint: The number is between 0 and 256 in binary.</p>
    <div class="character" id="doofenshmirtz">
      <div class="speech-bubble" id="doofSpeech">Placeholder Text</div>
    </div>
    <div class="character" id="perry"></div>
    <canvas id="particleCanvas"></canvas>
  </div>
    <script>
      let score = 0;
      let attempts = 30;
      let currentRandomNumber = Math.floor(Math.random() * 256).toString(2);
      const doofPhrases = [
        "Ouch! Perry, why?",
        "This wasn't in my -inator's plans!",
        "Curse you, Perry the Platypus!",
        "I knew this wouldn't end well!",
        "Why do these things always happen to me?",
        "Ha! Missed me!",
        "In your face!",
        "Get away from me!",
        "I WILL take over the entire Tri-state area!",
        "You can NOT stop me!"
        // Add more phrases as needed
      ];
      function getRandomPhrase() {
        return doofPhrases[Math.floor(Math.random() * doofPhrases.length)];
      }
      function checkGuess() {
        const userGuess = document.getElementById('userGuess').value.trim();
        const doofSpeechBubble = document.getElementById('doofSpeech');
        doofSpeechBubble.innerText = getRandomPhrase(); // Set random speech text
        if (attempts <= 0) {
          document.getElementById('result').innerHTML = "Out of attempts! Try again.";
          return;
        }
        if (userGuess === currentRandomNumber) {
          showParticleAnimation(); // Call the particle animation function
          document.getElementById('result').innerHTML = "Congratulations! Perry the Platypus is free, and the number was correct. Dr. Doofenshmirtz gets kicked by Perry.";
          document.getElementById('doofenshmirtz').classList.add('speaking'); // Make Doofenshmirtz speak
          score += 10;
          document.getElementById('score').innerText = score;
          attempts = 0; // To stop further attempts after correct guess
        } else {
          attempts--;
          document.getElementById('attemptsLeft').innerText = attempts;
          document.getElementById('result').innerHTML = "Sorry, wrong guess! " + attempts + " tries left.";
          if (attempts <= 0) {
            document.getElementById('perry').style.transform = 'translateY(100px)';
          } else {
            document.getElementById('perry').style.transform = 'none';
          }
          const parsedUserGuess = parseInt(userGuess, 2);
          const parsedRandomNumber = parseInt(currentRandomNumber, 2);
          if (parsedUserGuess > parsedRandomNumber) {
            document.getElementById('hintText').innerHTML = "Hint: Try a lower number.";
          } else if (parsedUserGuess < parsedRandomNumber) {
            document.getElementById('hintText').innerHTML = "Hint: Try a higher number.";
          }
        }
        doofSpeechBubble.style.opacity = 1; // Show the speech bubble
        setTimeout(() => {
          doofSpeechBubble.style.opacity = 0; // Hide the speech bubble after a delay
        }, 3000); // Adjust the delay duration in milliseconds (currently set to 3 seconds)
      }
      function resetGame() {
        attempts = 30;
        score = 0;
        document.getElementById('result').innerHTML = "";
        document.getElementById('doofenshmirtz').classList.remove('speaking'); // Remove speaking class
        document.getElementById('perry').style.transform = 'none';
        document.getElementById('hintText').innerHTML = "Hint: The number is between 0 and 1023 in binary.";
        currentRandomNumber = Math.floor(Math.random() * 256).toString(2);
        document.getElementById('userGuess').value = "";
        document.getElementById('attemptsLeft').innerText = attempts;
        document.getElementById('score').innerText = score;
      }
      // Particle Animation Function
      function showParticleAnimation() {
        const canvas = document.getElementById('particleCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const particles = [];
        const particleCount = 400;
        for (let i = 0; i < particleCount; i++) {
          particles.push({
            x: canvas.width / 2,
            y: canvas.height / 2,
            speed: Math.random() * 3 + 1,
            color: `hsla(${Math.random() * 360}, 100%, 50%, 0.8)`,
            angle: Math.random() * Math.PI * 2,
            angleSpeed: Math.random() * 0.1 - 0.05
          });
        }
        function draw() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          for (let i = 0; i < particles.length; i++) {
            const p = particles[i];
            ctx.fillStyle = p.color;
            ctx.fillRect(p.x, p.y, 3, 3);
            p.x += Math.cos(p.angle) * p.speed;
            p.y += Math.sin(p.angle) * p.speed;
            p.angle += p.angleSpeed;
          }
          requestAnimationFrame(draw);
        }
        draw();
      }
    </script>
</body>
</html>